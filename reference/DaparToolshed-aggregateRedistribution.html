<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Aggregate an assay's quantitative features with shared peptide redistribution — DaparToolshed-aggregateRedistribution • DaparToolshed</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregate an assay's quantitative features with shared peptide redistribution — DaparToolshed-aggregateRedistribution"><meta name="description" content="This function aggregates the quantitative features of an assay,
applying a summarization function (fun) to sets of features.
The fcol variable name points to a rowData column that defines
how to group the features during aggregate. This variable has to
be an adjacency matrix. This function uses inner.aggregate.iter()
to aggregate quantitative data.
The list of agregation methods can be obtained with the function
aggregateMethods(). This function compiles both methods from the
packages DaparToolshed and QFeatures."><meta property="og:description" content="This function aggregates the quantitative features of an assay,
applying a summarization function (fun) to sets of features.
The fcol variable name points to a rowData column that defines
how to group the features during aggregate. This variable has to
be an adjacency matrix. This function uses inner.aggregate.iter()
to aggregate quantitative data.
The list of agregation methods can be obtained with the function
aggregateMethods(). This function compiles both methods from the
packages DaparToolshed and QFeatures."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DaparToolshed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/DaparToolshed.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/edyp-lab/DaparToolshed/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Aggregate an assay's quantitative features with shared peptide redistribution</h1>
      <small class="dont-index">Source: <a href="https://github.com/edyp-lab/DaparToolshed/blob/master/R/aggregation.R" class="external-link"><code>R/aggregation.R</code></a></small>
      <div class="d-none name"><code>DaparToolshed-aggregateRedistribution.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function aggregates the quantitative features of an assay,
applying a summarization function (<code>fun</code>) to sets of features.
The <code>fcol</code> variable name points to a rowData column that defines
how to group the features during aggregate. This variable has to
be an adjacency matrix. This function uses <code><a href="DaparToolshed-aggregate.html">inner.aggregate.iter()</a></code>
to aggregate quantitative data.</p>
<p>The list of agregation methods can be obtained with the function
<code><a href="DaparToolshed-aggregate.html">aggregateMethods()</a></code>. This function compiles both methods from the
packages <code>DaparToolshed</code> and <code>QFeatures</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">aggregateRedistribution</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'QFeatures'</span></span>
<span><span class="fu">aggregateRedistribution</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">i</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"newAssay"</span>,</span>
<span>  <span class="va">fcol</span>,</span>
<span>  init.method <span class="op">=</span> <span class="st">"Mean"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"Mean"</span>,</span>
<span>  ponderation <span class="op">=</span> <span class="st">"Global"</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  uniqueiter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max_iter <span class="op">=</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'SummarizedExperiment'</span></span>
<span><span class="fu">aggregateRedistribution</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">fcol</span>,</span>
<span>  init.method <span class="op">=</span> <span class="st">"Mean"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"Mean"</span>,</span>
<span>  ponderation <span class="op">=</span> <span class="st">"Global"</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  uniqueiter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">conds</span>,</span>
<span>  max_iter <span class="op">=</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An instance of class <code>QFeatures</code> or <code>SummarizedExperiment</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>xxx</p></dd>


<dt id="arg-i">i<a class="anchor" aria-label="anchor" href="#arg-i"></a></dt>
<dd><p>The index or name of the assay which features will be aggregated the create the new assay.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>A <code>character(1)</code> naming the new assay. Default is <code>newAssay</code>.
Note that the function will fail if there's already an assay with <code>name</code>.</p></dd>


<dt id="arg-fcol">fcol<a class="anchor" aria-label="anchor" href="#arg-fcol"></a></dt>
<dd><p>A <code>character(1)</code> naming a rowdata variable (of assay <code>i</code> in case of a <code>QFeatures</code>)
defining how to aggregate the features of the assay.
This variable is a (possibly sparse) matrix. See below for details.</p></dd>


<dt id="arg-init-method">init.method<a class="anchor" aria-label="anchor" href="#arg-init-method"></a></dt>
<dd><p>A function used for initializing the aggregation.
Available functions are <code>Sum</code>, <code>Mean</code>, <code>Median</code>, <code>medianPolish</code> or <code>robustSummary</code>.
See <code><a href="DaparToolshed-aggregate.html">inner.aggregate.iter()</a></code> for details.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A function used for the aggregation.
Available functions are <code>Sum</code>, <code>Mean</code>, <code>Median</code> or <code>medianPolish</code>.
See <code><a href="DaparToolshed-aggregate.html">inner.aggregate.iter()</a></code> for details.</p></dd>


<dt id="arg-ponderation">ponderation<a class="anchor" aria-label="anchor" href="#arg-ponderation"></a></dt>
<dd><p>A <code>character(1)</code> defining what to consider to create the coefficient for redistribution of shared peptides.
Available values are <code>Global</code> (default), <code>Condition</code> or <code>Sample</code>.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>A <code>numeric(1)</code> specifying the number of peptides to use for each protein. If <code>NULL</code>, all peptides are considered.</p></dd>


<dt id="arg-uniqueiter">uniqueiter<a class="anchor" aria-label="anchor" href="#arg-uniqueiter"></a></dt>
<dd><p>xxx</p></dd>


<dt id="arg-max-iter">max_iter<a class="anchor" aria-label="anchor" href="#arg-max-iter"></a></dt>
<dd><p>A <code>numeric(1)</code> setting the maximum number of iteration.</p></dd>


<dt id="arg-conds">conds<a class="anchor" aria-label="anchor" href="#arg-conds"></a></dt>
<dd><p>xxx</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>QFeatures</code> object with an additional assay or a <code>SummarizedExperiment</code> object (or subclass thereof).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses <code><a href="DaparToolshed-aggregate.html">inner.aggregate.iter()</a></code> to aggregate quantitative data.</p>
    </div>
    <div class="section level2">
    <h2 id="iterative-aggregation-function">Iterative aggregation function<a class="anchor" aria-label="anchor" href="#iterative-aggregation-function"></a></h2>


<p>xxxxxx
xxxxx</p>
    </div>
    <div class="section level2">
    <h2 id="quantitative-metadata-aggregation">Quantitative metadata aggregation<a class="anchor" aria-label="anchor" href="#quantitative-metadata-aggregation"></a></h2>


<p>The function to aggregate the quantitative metadata is <code>aggQmetadat()</code></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>The <em>QFeatures</em> vignette provides an extended example and the <em>Aggregation</em> vignette,
for a complete quantitative proteomics data processing pipeline.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ---------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## An example QFeatures with PSM-level data</span></span></span>
<span class="r-in"><span><span class="co">## ---------------------------------------</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">subR25prot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bioconductor.org/packages/SummarizedExperiment" class="external-link">SummarizedExperiment</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">subR25prot</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Aggregate peptides into proteins</span></span></span>
<span class="r-in"><span><span class="co">## using the adjacency matrix</span></span></span>
<span class="r-in"><span><span class="va">feat1</span> <span class="op">&lt;-</span> <span class="fu">aggregateRedistribution</span><span class="op">(</span>object <span class="op">=</span> <span class="va">subR25prot</span>,</span></span>
<span class="r-in"><span>i <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>name <span class="op">=</span> <span class="st">'aggregated'</span>,</span></span>
<span class="r-in"><span>fcol <span class="op">=</span> <span class="st">'adjacencyMatrix'</span>,</span></span>
<span class="r-in"><span>init.method <span class="op">=</span> <span class="st">'Mean'</span>,</span></span>
<span class="r-in"><span>method <span class="op">=</span> <span class="st">'Mean'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">assay</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">assay</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/QFeatures/man/QFeatures-aggregate.html" class="external-link">aggcounts</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">assay</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/QFeatures/man/QFeatures-aggregate.html" class="external-link">aggcounts</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">rowData</a></span><span class="op">(</span><span class="va">feat1</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Samuel Wieczorek, Thomas Burger.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

